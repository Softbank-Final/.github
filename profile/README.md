## Hi there ğŸ‘‹

# NanoGrid (ãƒŠãƒã‚°ãƒªãƒƒãƒ‰)

**Lambdaì— ì˜ì¡´í•˜ì§€ ì•Šê³ , EC2 ìœ„ì— ì§ì ‘ êµ¬ì¶•í•œ ì…€í”„ í˜¸ìŠ¤íŠ¸í˜• FaaS í”Œë«í¼**

## 1. í”„ë¡œë•íŠ¸ ê°œìš” (Product Overview)

**ã€ŒVMwareì—ì„œ íƒˆí”¼ã€ì™€ ã€Œí´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œí™”ã€ë¥¼ ì‹¤í˜„í•œ ì°¨ì„¸ëŒ€ ì„œë²„ë¦¬ìŠ¤ ì—”ì§„**

- **ë¬´ì œí•œ ì‹¤í–‰ ì‹œê°„**: íƒ€ì„ì•„ì›ƒ ì œí•œ(Lambdaì˜ 29ì´ˆ)ì„ ì œê±°í•˜ê³ , ê¸´ ì‹œê°„ ì‹¤í–‰ì´ í•„ìš”í•œ ì‘ì—…ì´ë‚˜ ë¹„ë™ê¸° ì²˜ë¦¬ì— ëŒ€ì‘.
- **ë©€í‹° í´ë¼ìš°ë“œ ì˜ì†ì„±**: AWS S3ë¿ë§Œ ì•„ë‹ˆë¼ GCP Cloud Storageì— ì´ì¤‘ ì €ì¥í•˜ì—¬ ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ë³´í˜¸.
- **ë‹¤ì–‘í•œ ì–¸ì–´ ì§€ì›**: Node.js, Python, C++, Go ë“± Lambdaë³´ë‹¤ ìœ ì—°í•œ ëŸ°íƒ€ì„ í™˜ê²½ì„ ì œê³µ.
- **Private AI ì¶”ë¡ **: ì™¸ë¶€ APIì— ì˜ì¡´í•˜ì§€ ì•Šê³  VPC ë‚´ë¶€ì—ì„œ ì™„ë£Œë˜ëŠ” ì•ˆì „í•œ AI ì¶”ë¡  í™˜ê²½.

## 2. ê°œë°œ ë°°ê²½ê³¼ ì§„í™”ì˜ ê³¼ì • (Background & Evolution)

**ë¬¸ì œ: ê¸°ì¡´ FaaSì˜ ì œì•½ (íƒ€ì„ì•„ì›ƒ, ë²¤ë” ë½ì¸)ê³¼ VMware ì˜ì¡´ì—ì„œ ë²—ì–´ë‚˜ëŠ” ë¬¸ì œ**

| **ë²„ì „** | **í•´ê²°ì±… (NanoGrid Solution)** | **ê¸°ìˆ ì  íŠ¹ì§•** |
| --- | --- | --- |
| **V1** | **VMware íƒˆí”¼ ë° ë…ì ì—”ì§„ ì„¤ê³„** | ê²½ëŸ‰ ì»¨í…Œì´ë„ˆ ê¸°ë°˜ì˜ ë…ìì ì¸ í´ë¼ìš°ë“œ ì—”ì§„ êµ¬ì¶•, í™•ì¥ì„±ê³¼ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ë³´ì¥. |
| **V2** | **29ì´ˆ íƒ€ì„ì•„ì›ƒ(Lambda ì œí•œ) ëŒíŒŒ** | Lambdaë¥¼ íê¸°í•˜ê³  **EC2 Controller** ë„ì…. API Gateway â†’ ALBë¡œ ë³€ê²½í•˜ì—¬ ê¸´ ì‹¤í–‰ ì‹œê°„ì„ ì‹¤í˜„. |
| **V3** | **ê³ ê°€ìš©ì„±(High Availability)** | Controllerì™€ Workerë¥¼ **Multi-AZ**ë¡œ ë°°ì¹˜í•˜ì—¬ ë‹¨ì¼ ì¥ì• ì (SPOF)ì„ ì œê±°. |
| **V4** | **ë©€í‹° í´ë¼ìš°ë“œ ì˜ì†ì„±** | ì‹¤í–‰ ì„±ê³µ ì½”ë“œë¥¼ **GCP Cloud Storage**ì— ì˜êµ¬ ì €ì¥. ë²¤ë” ë½ì¸ ìœ„í—˜ì„ ê°ì†Œì‹œí‚´. |
| **V5** | **ì—”í„°í”„ë¼ì´ì¦ˆ ë³´ì•ˆ** | **AWS WAF** ë„ì… (SQLi, XSS, DoS ë°©ì–´). ëª¨ë“  ë°ì´í„°ë¥¼ VPC ë‚´ë¶€ì—ì„œë§Œ ì²˜ë¦¬í•˜ëŠ” íì‡„ë§ ì„¤ê³„. |
| **V6** | **Private AI ë‚´ì¬í™”** | ë‚´ë¶€ **AI EC2** ë…¸ë“œë¥¼ êµ¬ì¶•í•˜ì—¬ ë°ì´í„° ìœ ì¶œì„ ë°©ì§€í•˜ëŠ” ì•ˆì „í•œ ì¶”ë¡  í™˜ê²½ì„ êµ¬í˜„. |

## 3. **ì•„í‚¤í…ì²˜ ë° ì£¼ìš” ê¸°ëŠ¥ (Architecture & Key Features)**

![image.png](attachment:7044dbc6-39f3-4773-81f8-c8d3735d92f7:image.png)

### 3-1. Lambda-less ë…ì ì œì–´ í‰ë©´ (Control Plane)

> ë°œí‘œ ì‹œ í¬ì¸íŠ¸: ìƒë‹¨ì˜ Controller EC2 ê°•ì¡°

- **êµ¬ì„±**: EC2 Controller 2ëŒ€, **Multi-AZ** êµ¬ì„± (ap-northeast-2a, 2c).
- **ë³´ì•ˆ**: **ALB + WAF**ë¥¼ ì´ìš©í•œ íŠ¸ë˜í”½ ë¶„ì‚° ë° ê³µê²© ë°©ì–´ (SQLi, XSS, Rate Limit).
- **ê¸°ëŠ¥**: ë¼ìš°í„° ì—­í• ì„ í•˜ë©°, íƒ€ì„ì•„ì›ƒ ì—†ëŠ” ê¸´ ì‹¤í–‰ ì‘ì—…ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

### 3-2. VPC ë‚´ë¶€ Private AI ë…¸ë“œ

> ë°œí‘œ ì‹œ í¬ì¸íŠ¸: í•˜ë‹¨ì˜ AI Node ê°•ì¡°

- **ì™„ì „ ê²©ë¦¬**: Private Subnetì— ë°°ì¹˜ëœ AI ì¶”ë¡  ì„œë²„ (IP: 10.0.20.100).
- **ë°ì´í„° ì£¼ê¶Œ**: ì™¸ë¶€ ì¸í„°ë„·ê³¼ì˜ ì ‘ì´‰ ì—†ì´ ë°ì´í„°ë¥¼ ìœ ì¶œì„ ì°¨ë‹¨.
- **ì ‘ê·¼ ì œì–´**: Security Groupì„ í†µí•´ Workerë§Œ ì ‘ê·¼ ê°€ëŠ¥.

### 3-3. SQS ê¸°ë°˜ Auto Scaling (í•µì‹¬ ë¡œì§)

> ë°œí‘œ ì‹œ í¬ì¸íŠ¸: Worker EC2ì˜ ì¦ê° ì„¤ëª…

- **ìŠ¤ì¼€ì¼ ì•„ì›ƒ**: SQS ë©”ì‹œì§€ **10ê°œ ì´ìƒ** â†’ ìµœëŒ€ 5ëŒ€ê¹Œì§€ ìë™ ì¦ê°€.
- **ìŠ¤ì¼€ì¼ ì¸**: ë©”ì‹œì§€ **0ê°œ** (3ë¶„ ìœ ì§€) â†’ ìµœì†Œ 2ëŒ€ê¹Œì§€ ì¶•ì†Œ.
- **ì•ˆì •ì„±**: Multi-AZ ë¶„ì‚° ë°°ì¹˜ì™€ 300ì´ˆ ì¿¨ë‹¤ìš´ íƒ€ì„ìœ¼ë¡œ ê¸‰ê²©í•œ ë³€ë™ì„ ë°©ì§€.

### 3-4. ë©€í‹° í´ë¼ìš°ë“œ ë°ì´í„° ì˜ì†ì„± (Persistence)

> ë°œí‘œ ì‹œ í¬ì¸íŠ¸: ìš°ì¸¡ì˜ S3ì™€ í•˜ë‹¨ GCPë¡œì˜ íë¦„ ê°•ì¡°

- **AWS S3**: ì†ŒìŠ¤ ì½”ë“œ ì›ë³¸ì„ ì €ì¥.
- **GCP Cloud Storage**: ì‹¤í–‰ ì„±ê³µí•œ ì½”ë“œì™€ ê²°ê³¼ë¥¼ ì˜êµ¬ ì €ì¥.
- **ë³´ì•ˆ ì „ì†¡**: Workerê°€ NAT Gatewayë¥¼ í†µí•´ **AWS Secrets Manager**ì—ì„œ ê´€ë¦¬ëœ ì¸ì¦ í‚¤ë¡œ GCPë¡œ ì§ì ‘ ì „ì†¡.

### 3-5. Redis Pub/Sub ì‹¤ì‹œê°„ ìƒíƒœ ê´€ë¦¬

- **ë¹„ë™ê¸° í†µì‹ **: Controller â†” Worker ê°„ ë¹ ë¥¸ ìƒíƒœ ë™ê¸°í™”.
- **ìƒíƒœ ì¶”ì **: PENDING â†’ PROCESSING â†’ SUCCESS/FAILED ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì‹œê°í™”.
- **ìë™ ì •ë¦¬**: TTL 24ì‹œê°„ ì„¤ì •ìœ¼ë¡œ ë©”ëª¨ë¦¬ ê´€ë¦¬.

---

## 4. **ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)**

| **ë¶„ë¥˜** | **ê¸°ìˆ  (Technology)** |
| --- | --- |
| **ì–¸ì–´** | Node.js/Express (Controller), Python (Worker) |
| **AWS ì¸í”„ë¼** | EC2, VPC, ALB, SQS, S3, ElastiCache Redis, Secrets Manager |
| **ë©€í‹° í´ë¼ìš°ë“œ** | **GCP Cloud Storage** (Backup & Persistence) |
| **IaC** | Terraform |
| **ì»¨í…Œì´ë„ˆ** | Docker (Isolation & Runtime) |
| **ë³´ì•ˆ** | **AWS WAF** (SQLi, XSS, Log4j, Rate Limit), Private Subnet, NAT GW |
| **ëª¨ë‹ˆí„°ë§** | CloudWatch Alarms (Auto Scaling Trigger) |

---

## 5. **ì¤‘ìš” ì§€í‘œ (Key Metrics)**

| **í•­ëª© (Item)** | **ìˆ˜ì¹˜/ì‚¬ì–‘ (Value/Spec)** |
| --- | --- |
| **Controller** | **2ëŒ€** (Multi-AZ ê³ ê°€ìš©ì„± êµ¬ì„±) |
| **Worker** | **2~5ëŒ€** (SQS ê¸°ë°˜ Auto Scaling) |
| **Scale Out ì„ê³„ê°’** | SQS ë©”ì‹œì§€ **10ê°œ** ì´ìƒ |
| **Scale In ì¡°ê±´** | SQS ë©”ì‹œì§€ **0ê°œ** (3ë¶„ ê°„ ìœ ì§€) |
| **Cooldown** | **300ì´ˆ** (5ë¶„) |
| **AI Node** | Private Subnet **ì™„ì „ ê²©ë¦¬** (ì¸í„°ë„· ì ‘ì† ì°¨ë‹¨) |
| **ë°ì´í„° ì €ì¥** | **AWS S3 + GCP Cloud Storage** (ë©€í‹° í´ë¼ìš°ë“œ) |

